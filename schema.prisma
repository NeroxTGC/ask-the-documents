datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  extensions = [pgvector(map: "vector")]
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

model User {
  id    Int     @id @default(autoincrement())
  email String?
}

model Document {
  id          String        @id @default(uuid())
  title       String
  url         String       @unique
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  sections    Section[]
}

model Section {
  id          String    @id @default(uuid())
  content     String
  embedding   Unsupported("vector(1536)")
  orderIndex  Int       // Para mantener el orden de las secciones
  document    Document  @relation(fields: [documentId], references: [id], onDelete: Cascade)
  documentId  String
  
  @@unique([documentId, orderIndex])
}
